(function(){"use strict";var e={393:function(e,t,n){var o=n(5130),r=n(6768),i=n(4232);const s={style:{"background-color":"antiquewhite",padding:"16px 16px 16px 16px"}};function l(e,t,n,o,l,a){const c=(0,r.g2)("PriceItem");return(0,r.uX)(),(0,r.CE)("div",s,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.price_list,((e,t)=>((0,r.uX)(),(0,r.Wv)(c,{item:e,style:(0,i.Tr)(t===o.price_list.length-1?"":"margin-bottom: 16px")},null,8,["item","style"])))),256))])}var a=n(1114);class c{static loadCredentials(){return this.table_api_key&&this.table_id&&this.drive_api_key?Promise.resolve():fetch("/credentials.json").then((e=>e.json())).then((e=>{this.table_api_key=e.table_api_key,this.table_id=e.table_id,this.drive_api_key=e.drive_api_key})).catch((e=>{throw console.error("Failed to load credentials:",e),e}))}static convertTableToJson(e){const t=e[0];return Promise.all(e.slice(1).map((async e=>{const n={};for(let o=0;o<t.length;o++){const r=t[o];n[r]="photos"===r?e[o]?e[o].split("\n"):[]:e[o]||""}return n})))}static fetchImageFromDrive(e){const t=this.extractFileId(e);if(!t)return console.error("Invalid Google Drive URL:",e),Promise.resolve("");const n=`https://www.googleapis.com/drive/v3/files/${t}?alt=media&key=${this.drive_api_key}`;return fetch(n).then((e=>{if(!e.ok)throw new Error(`Failed to fetch image from Google Drive: ${e.statusText}`);return e.url})).catch((e=>(console.error("Error fetching image:",e),"")))}static extractFileId(e){const t=e.match(/[-\w]{25,}/);return t?t[0]:null}static getData(e){return this.loadCredentials().then((()=>{const t=`https://sheets.googleapis.com/v4/spreadsheets/${this.table_id}/values/${e}?key=${this.table_api_key}`;return fetch(t).then((e=>e.json())).then((e=>this.convertTableToJson(e.values))).catch((e=>{throw console.error("Failed to fetch data from Google Sheets:",e),e}))}))}}(0,a.A)(c,"table_api_key",null),(0,a.A)(c,"table_id",null),(0,a.A)(c,"drive_api_key",null);var u=n(144);const p={style:{padding:"16px","border-radius":"4px","background-color":"white",display:"flex"}},h=["src"],d={key:1,style:{width:"100px",height:"100px",display:"flex","align-items":"center","justify-content":"center"}},f={key:1,style:{width:"100px",height:"100px",display:"flex","align-items":"center","justify-content":"center"}},v={style:{"padding-bottom":"16px","font-size":"16px","font-weight":"bold"}},g={style:{}};function _(e,t,n,o,s,l){return(0,r.uX)(),(0,r.CE)("div",p,[o.is_loading_photo?((0,r.uX)(),(0,r.CE)("div",f,"LOADING")):((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[o.photo_link?((0,r.uX)(),(0,r.CE)("img",{key:0,src:o.photo_link,alt:"image",width:"100px",height:"100px"},null,8,h)):((0,r.uX)(),(0,r.CE)("div",d,"NO IMAGE"))],64)),(0,r.Lk)("div",null,[(0,r.Lk)("div",v,(0,i.v_)(e.$props.item.name),1),(0,r.Lk)("div",g,(0,i.v_)(e.$props.item.description),1)])])}var m={name:"PriceItem",props:{item:Object},setup(e){const t=(0,u.KR)(!0),n=(0,u.KR)(null);return e.item.photos.length?c.fetchImageFromDrive(e.item.photos[0]).then((e=>{n.value=e,console.log(e),t.value=!1})):t.value=!1,{is_loading_photo:t,photo_link:n}}},y=n(1241);const b=(0,y.A)(m,[["render",_]]);var k=b,x={name:"App",components:{PriceItem:k},setup(){const e=(0,u.KR)([]),t="test!A1:D6";return c.getData(t).then((t=>{e.value=t,console.log("Данные получены:",t)})).catch((e=>{console.error("Ошибка при получении данных:",e)})),{price_list:e}}};const w=(0,y.A)(x,[["render",l]]);var O=w;(0,o.Ef)(O).mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,i){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],r=e[u][1],i=e[u][2];for(var l=!0,a=0;a<o.length;a++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[a])}))?o.splice(a--,1):(l=!1,i<s&&(s=i));if(l){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,r,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,s=o[0],l=o[1],a=o[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(a)var u=a(n)}for(t&&t(o);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},o=self["webpackChunktest_google_docs_bd"]=self["webpackChunktest_google_docs_bd"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(393)}));o=n.O(o)})();
//# sourceMappingURL=app.74a17573.js.map